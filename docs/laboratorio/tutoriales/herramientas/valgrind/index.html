<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-laboratorio/tutoriales/herramientas/valgrind" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">valgrind | Sistemas Operativos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://udea-so.github.io/udea-so/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://udea-so.github.io/udea-so/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://udea-so.github.io/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="valgrind | Sistemas Operativos"><meta data-rh="true" name="description" content="* Objetivo..."><meta data-rh="true" property="og:description" content="* Objetivo..."><link data-rh="true" rel="icon" href="/udea-so/img/Tux.svg"><link data-rh="true" rel="canonical" href="https://udea-so.github.io/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind"><link data-rh="true" rel="alternate" href="https://udea-so.github.io/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind" hreflang="en"><link data-rh="true" rel="alternate" href="https://udea-so.github.io/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/udea-so/blog/rss.xml" title="Sistemas Operativos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/udea-so/blog/atom.xml" title="Sistemas Operativos Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/udea-so/assets/css/styles.141d2056.css">
<script src="/udea-so/assets/js/runtime~main.cde558d6.js" defer="defer"></script>
<script src="/udea-so/assets/js/main.f4b9c302.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/udea-so/"><div class="navbar__logo"><img src="/udea-so/img/Tux.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/udea-so/img/Tux.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Curso de Sistemas Operativos</b></a><a class="navbar__item navbar__link" href="/udea-so/docs/teoria/intro-teoria">Teoria</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/udea-so/docs/laboratorio/intro-laboratorio">Laboratorio</a><a class="navbar__item navbar__link" href="/udea-so/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/udea-so/udea-so" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header--github-link" aria-label="GitHub repository"></a><a href="https://www.youtube.com/channel/UCZuMEsHy5jdZtdtJtDWoACQ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__youtube navbar__icon" aria-label="YouTube channel"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/udea-so/docs/laboratorio/intro-laboratorio">Sobre el laboratorio</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/udea-so/docs/laboratorio/practicas/intro">Practicas</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/udea-so/docs/laboratorio/recursos/intro">Recursos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/udea-so/docs/laboratorio/tutoriales/intro">Tutoriales</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/intro">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/herramientas/linux">Herramientas</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/herramientas/linux">Linux básico</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/herramientas/gcc">Compilador gcc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/herramientas/make">Make</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/herramientas/gdb">GDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind">valgrind</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/procesos">Procesos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/udea-so/docs/laboratorio/tutoriales/hilos/threads">Hilos y sincronización</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/udea-so/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutoriales</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Herramientas</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">valgrind</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Valgrind</h1>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Objetivos</div><div class="admonitionContent_BuS1"><ul>
<li>Objetivo...</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-antes-de-empezar">1. Antes de empezar<a class="hash-link" aria-label="Direct link to 1. Antes de empezar" title="Direct link to 1. Antes de empezar" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#1-antes-de-empezar">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-antes-de-empezar">1.1. Antes de empezar<a class="hash-link" aria-label="Direct link to 1.1. Antes de empezar" title="Direct link to 1.1. Antes de empezar" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#11-antes-de-empezar">​</a></h3>
<p>Antes de empezar con la revisión de este material, se recomienda que revise la página <strong>Tutorial de Valgrind y Helgrind</strong> (<a href="https://docs.utnso.com.ar/guias/herramientas/valgrind" target="_blank" rel="noopener noreferrer">link</a>).</p>
<p>Como material de consulta adicional se proporciona el siguiente marterial (reviselo para profundizar conceptos claves) a los siguientes documentos:</p>
<ol>
<li><strong>Valgrind Quick Reference Guide</strong> <a href="/udea-so/assets/files/Valgrind_Quick_Reference_Guide-4c7f6e43f4e427042d1773860e1e27c9.pdf" target="_blank">[link]</a></li>
<li><strong>Debugging with GDB and Valgrind</strong> <a href="/udea-so/assets/files/gdb-valgrind_cheatsheet-20d6d6effc76dc3cad65af5ed3b450a4.pdf" target="_blank">[link]</a></li>
<li><strong>Valgrind HOWTO</strong> <a href="/udea-so/assets/files/Valgrind-HOWTO-d586318fe5c5036d5c80284466a53a6b.pdf" target="_blank">[link]</a></li>
<li><strong>Manual Rápido de Valgrind CC31A</strong> de José Miguel Piquer y equipo <a href="/udea-so/assets/files/valgrind-533fffee30d2fb2dfc744b7d753a873a.pdf" target="_blank">[link]</a></li>
<li><strong>Valgrind - Tutorial basico de Memcheck</strong> <a href="/udea-so/assets/files/valgrind_slide-9011124c6ee65c87fe359d12585b5503.pdf" target="_blank">[link]</a></li>
<li><strong>Valgrind</strong> de David Gunter <a href="/udea-so/assets/files/gunter_valgrind-be0ae63aa9d02a1868e50f8bbbe28cc2.pdf" target="_blank">[link]</a></li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Gran parte del material que se empleo para esta documentación proviene del curso de <strong>Sistemas Operativos</strong> (<a href="https://docs.utnso.com.ar/" target="_blank" rel="noopener noreferrer">link</a>) de la <a href="https://www.frba.utn.edu.ar/" target="_blank" rel="noopener noreferrer">UTN.BA</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-mapa-de-memoria">1.2. Mapa de memoria<a class="hash-link" aria-label="Direct link to 1.2. Mapa de memoria" title="Direct link to 1.2. Mapa de memoria" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#12-mapa-de-memoria">​</a></h3>
<p>Poner algo sobre el mapa de memoria a modo de recuerdo...</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-manejo-de-memoria">1.3. Manejo de memoria<a class="hash-link" aria-label="Direct link to 1.3. Manejo de memoria" title="Direct link to 1.3. Manejo de memoria" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#13-manejo-de-memoria">​</a></h3>
<p>Colocar algunas funciones de manejo de memoria...</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-sobre-el-valgrind">2. Sobre el valgrind<a class="hash-link" aria-label="Direct link to 2. Sobre el valgrind" title="Direct link to 2. Sobre el valgrind" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#2-sobre-el-valgrind">​</a></h2>
<p><strong>Valgrind</strong> es una colección de herramientas que pueder usadas para realizar diferentes tipos de analisis en programas. Para mas información puede consultar la pagina oficial: <a href="http://www.valgrind.org" target="_blank" rel="noopener noreferrer">www.valgrind.org</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-promeros-pasos">2.1. Promeros pasos<a class="hash-link" aria-label="Direct link to 2.1. Promeros pasos" title="Direct link to 2.1. Promeros pasos" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#21-promeros-pasos">​</a></h3>
<p>Usar Valgrind se resume en tres pasos basicos:</p>
<ol>
<li>Compilar.</li>
<li>Usar el Valgrind</li>
<li>Analizar los resultados.</li>
</ol>
<p>A continuación vamos a tratar con mas detalle cada paso.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-compilar">2.1.1. Compilar<a class="hash-link" aria-label="Direct link to 2.1.1. Compilar" title="Direct link to 2.1.1. Compilar" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#211-compilar">​</a></h4>
<p>Despues codificar el programa en c, se procede a generar el ejecutable mediante el compilador <code>gcc</code>. Es importante que cuando lleve a cabo la compilación use la bandera <code>-g</code> para agregar información de debug que facilite el analisis de los resultados. Por ejemplo, si el archivo fuente es <code>myprog.c</code> y queremos generar un ejecutable llamado <code>myprog.out</code> el comando de compilación sería de la siguiente forma:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -Wall -g myprog.c -o myprog.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-usar-el-valgrind">2.1.2. Usar el valgrind<a class="hash-link" aria-label="Direct link to 2.1.2. Usar el valgrind" title="Direct link to 2.1.2. Usar el valgrind" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#212-usar-el-valgrind">​</a></h4>
<p>En general, para invocar el <code>valgrind</code> se usa el siguiente comando:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind [valgrind-options] your-prog [your-prog-options]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Como se menciono con anterioridad, <code>valgrind</code> dispone de diferentes herramientas para realizar el analisis de los programa. Para seleccionar la herramienta que empleará  <code>valgrind</code> se emplea la opción <code>--tool</code> (que es la mas importante). La selección de la <strong>herramienta</strong> (<a href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/6/html/performance_tuning_guide/s-memory-valgrind#s-memory-valgrind" target="_blank" rel="noopener noreferrer">link</a>) es de la forma <code>--tool=&lt;name&gt;</code>, donde <code>&lt;name&gt;</code> es la herramienta que usará Valgrind. La siguiente tabla muestra algunas de las opciones:</p>
<table><thead><tr><th>Herramienta</th><th>Comando</th><th>Descripción</th></tr></thead><tbody><tr><td><strong><code>Memcheck</code></strong></td><td><code>--tool=memcheck</code></td><td>Herramienta empleada para detectar errores de memoria. Esta comprueba todas las lecturas y escrituras y las llamadas a <code>malloc/new/free/delete</code>. Es la opción por defecto.</td></tr><tr><td><strong><code>Callgrind</code></strong></td><td><code>--tool=callgrind</code></td><td>Es una extensión <code>Cachegrind</code> que produce información extra sobre las <strong>callgraphs</strong>.</td></tr><tr><td><strong><code>Helgrind</code></strong></td><td><code>--tool=helgrind</code></td><td>Es un thread debugger para la detección de errores (data races por ejemplo) en programas multi-hilo.</td></tr><tr><td><strong><code>Massif</code></strong></td><td><code>--tool=massif</code></td><td>Esta herramienta es un <strong>heap profiler</strong> sirve para perfilar el uso de memoria en el programa, identificando las áreas que consumen más memoria.</td></tr><tr><td><strong><code>Cachegrind</code></strong></td><td><code>--tool=cachegrind</code></td><td>Esta herramienta permite analizar el rendimiento de la caché y detectar patrones de acceso a la memoria.</td></tr></tbody></table>
<p>Teniendo en cuenta lo anterior, si se desea ejecutar el comando <code>ls -l</code> usando la herramienta para comprobación memoria de memoria (<code>memcheck</code>), la forma como se usaría el comando sería:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --tool=memcheck ls -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="213-analizar-los-resultados">2.1.3. Analizar los resultados<a class="hash-link" aria-label="Direct link to 2.1.3. Analizar los resultados" title="Direct link to 2.1.3. Analizar los resultados" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#213-analizar-los-resultados">​</a></h3>
<p>Los resultados arrojados por el  <code>valgrind</code> son enviados a salida estandar por defecto. Sin embargo, a veces cuando analizar los resultados en pantalla se vuelve engorroso, es util direccionar estos resultados a un archivo de texto empleando la opción <code>--log-file=outfile</code>. Por ejemplo, si ubiesemos querido llevar la salida del comando anterior al archivo <code>log.txt</code> el comando a emplear seria:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --tool=memcheck --log-file=log.txt ls -l</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Para conocer mas sobre como usar <strong><code>Vagrind</code></strong> puede consultar el manual (<code>man valgrind</code>) o la ayuda (<code>valgrind --help</code>)</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-ejemplo-sencillo">2.2. Ejemplo sencillo<a class="hash-link" aria-label="Direct link to 2.2. Ejemplo sencillo" title="Direct link to 2.2. Ejemplo sencillo" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#22-ejemplo-sencillo">​</a></h3>
<p>El contenido del archivo <code>a.c</code> se muestra a continuación:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// problem 1: heap block overrun</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// problem 2: memory leak -- x not freed</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Mediante el uso de la herramienta <code>Memcheck</code> de <code>valgrind</code> determine si el programa tiene errores de memoria.</p>
<p>Vamos a proceder a realizar el analisis:</p>
<ol>
<li>
<p><strong>Compilar</strong>: Asumiendo que el ejecutable se llamará <code>a.out</code> el comando de <code>gcc</code> empleado será:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -Wall -g a.c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Ejecutar Valgrind</strong>: En este caso como se realizará un analisis de memoria, la herramienta a usar sera <code>--tool=memcheck</code>, de modo que siendo <code>a.out</code> el ejecutable, el comando a emplear será:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --tool=memcheck ./a.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Analizar los resultados</strong>: Si todo esta bien, la salida al ejecutar el comando anterior, será simular a la mostrada a continuación:</p>
<p align="center"></p><figure><p><img decoding="async" loading="lazy" alt="lib_dinamica" src="/udea-so/assets/images/salida_valgrind-4f9965996a3a8269ad7495b5bd318952.png" width="1323" height="543" class="img_ev3q">
</p><figcaption><strong>Fig 1</strong>. Salida del comando <code>valgrind</code> para el ejecutable <code>a.out</code>.</figcaption><p></p></figure><p></p>
<p>Las partes mas relevantes de la salida anterior se resaltan a continuación:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==113== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113== Command: ./a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113== Invalid write of size 4</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    at 0x10916B: f (a.c:5)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    by 0x109180: main (a.c:9)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==  Address 0x4a4a068 is 0 bytes after a block of size 40 alloc&#x27;d</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    by 0x10915E: f (a.c:4)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    by 0x109180: main (a.c:9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113== HEAP SUMMARY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113==     in use at exit: 40 bytes in 1 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113==   total heap usage: 1 allocs, 0 frees, 40 bytes allocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113== LEAK SUMMARY:</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    definitely lost: 40 bytes in 1 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    indirectly lost: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==      possibly lost: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==    still reachable: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113==         suppressed: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113== Rerun with --leak-check=full to see details of leaked memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==113== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==113== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>En resumen, los errores se deben:</p>
<ol>
<li>Se creo un array <code>x</code> de <code>10</code> enteros, sin embargo, se accedió a una dirección invalida, pues el maximo indice valido es 9, no 10.</li>
<li>No se liberó, usando <code>free</code>, el espacio que se reservo mediante <code>malloc</code> reservado en el heap.</li>
</ol>
<p>La interpretación consiste en analizar el contenido del log anteriormente lanzado para analizar donde se encuentran los errores. Para mas información sobre la información anteriormente desplegada lo invitamos a que consulte el siguiente <strong>The Valgrind Quick Start Guide</strong> (<a href="https://valgrind.org/docs/manual/quick-start.html" target="_blank" rel="noopener noreferrer">link</a>) del cual se tomo el ejemplo.</p>
</li>
<li>
<p>El código con los errores corregidos se muestra a cóntinuación.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"> </span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">                  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Volviendo a compilar el archivo fuente tenemos:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -Wall -g a.c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Luego si procedemos a usar <code>valgrind</code> nuevamente:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --tool=memcheck ./a.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La salida arrojada no mostrará errores tal y como se resalta a continuación al final del log:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==120== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120== Command: ./a.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120== HEAP SUMMARY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120==     in use at exit: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120==   total heap usage: 1 allocs, 1 frees, 40 bytes allocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120== All heap blocks were freed -- no leaks are possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==120== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==120== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-analisis-de-memoria-usando-valgrind">3. Analisis de memoria usando <code>valgrind</code><a class="hash-link" aria-label="Direct link to 3-analisis-de-memoria-usando-valgrind" title="Direct link to 3-analisis-de-memoria-usando-valgrind" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#3-analisis-de-memoria-usando-valgrind">​</a></h2>
<p>Tal y como se mencionó con anterioridad, mediante la herramienta <strong><code>Memcheck</code></strong> de <strong><code>valgrind</code></strong> es posible encontrar e identificar errores de memoria. Algunos de los tipos de memoria que se pueden identificar mediante el uso de esta herramienta son:</p>
<ul>
<li>Uso de memoria no inicializada.</li>
<li>Lectura o escritura de memoria liberada con <code>free</code></li>
<li>Lectura o escritura fuera del area reservada con <code>malloc</code></li>
<li>Lectura o escritura inapropiada de la pila</li>
<li>Memory leaks (fugas de memoria), cuando se pierden los punteros a un área de memoria pedida con <code>malloc</code></li>
<li>Correspondencia entre <code>malloc</code> y <code>free</code></li>
<li>Traslape de memoria de origen y destino en <code>memcpy</code> y funciones relacionadas</li>
</ul>
<p>Cuando se usa la herramienta para analisis de memoria (<code>--tool=memcheck</code>), se pueden emplear otras opciones adicionales para configurar los resultados de la salida tal y como lo describe la siguiente tabla:</p>
<table><thead><tr><th>Opción</th><th>Descripción</th></tr></thead><tbody><tr><td><code>--leak-check=yes|full|no|summary [default: summary]</code></td><td>Hace que Valgrind muestre las fugas de memoria cuando terminar el programa analizado. El valor por defecto es <code>summary</code>; las otras opciones con <code>no</code> para desactivar la opción; <code>yes</code> para informar sobre cada fuga de memoria y <code>full</code> que proporciona una salida más detallada, mostrando todos los tipos de pérdidas de memoria.</td></tr><tr><td><code>--leak-resolution=low|med|high [default: high]</code></td><td>Muestra información detallada sobre las fugas de memoria.</td></tr><tr><td><code>--track-origins=no|yes [default: no]</code></td><td>Muestra el origen de variable no definidas</td></tr><tr><td><code>--log-file=outfile</code></td><td>Guarda la salida de Valgrind en el archivo llamado <code>outfile</code>. Es util cuando se hace dificil analizar los resultados arrojados en la consola cuando la salida es muy grande.</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Para conocer de manera resumida la herramienta revise el siguiente resumen: <strong>Valgrind Quick Reference Guide</strong> <a href="/udea-so/assets/files/Valgrind_Quick_Reference_Guide-4c7f6e43f4e427042d1773860e1e27c9.pdf" target="_blank">[link]</a></p></div></div>
<p>A continuación se van a analizar diferentes casos de errores de memoria que pueden ser detectados mediante el uso de <code>valgrind</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-caso-de-uso-memcheck--uninitialized-memory">3.1. Caso de uso: Memcheck – Uninitialized Memory<a class="hash-link" aria-label="Direct link to 3.1. Caso de uso: Memcheck – Uninitialized Memory" title="Direct link to 3.1. Caso de uso: Memcheck – Uninitialized Memory" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#31-caso-de-uso-memcheck--uninitialized-memory">​</a></h3>
<p>Este error se da cuando:</p>
<ul>
<li>Las variables locales intentan ser leidas sin haber sido inicializadas.</li>
<li>Se intenta acceder a bloques de memoria asignados con ``malloc` sin estos haber sido previamente inicializados.</li>
</ul>
<p>Cuando la reserva se hace usando <code>calloc</code> no se presenta este problema ya que los bloques de memoria reservados son inilizalizado con <code>0</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ejemplos">Ejemplos<a class="hash-link" aria-label="Direct link to Ejemplos" title="Direct link to Ejemplos" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#ejemplos">​</a></h4>
<ol>
<li>
<p>Mediante el uso del <code>Valgrind</code> realice el analisis de memoria para el código (example1.c) mostrado a continuación:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/*Error occurs here*/</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Para la compilación del archivo fuente se usa el <code>gcc</code> con la bandera <code>-g</code> activada:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -Wall -g example1.c -o example1.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando <code>valgrind</code> ejecutado para este caso se muestra a continuación:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --leak-check=yes ./example1.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note que en el comando anterior no fue necesario usar la opción <code>--tool=memcheck</code> por que esta es la herramienta por defecto que usa <code>valgrind</code>. En todo caso, el comando equivalente se muestra a continuación:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --tool=memcheck --leak-check=yes ./example1.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>La salida resultante es la siguiente.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==132== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== Command: ./example1.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==132== Conditional jump or move depends on uninitialised value(s)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==132==    at 0x109135: main (example1.c:5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== HEAP SUMMARY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132==     in use at exit: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== All heap blocks were freed -- no leaks are possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== Use --track-origins=yes to see where uninitialised values come from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==132== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==132== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Como se resalta en la salida anterior, se hace enfasis que en la linea <code>5</code> del archivo <code>example1.c</code> el condicional depende de una variable no inicializada lo cual hace que el comportamiento del programa no se pueda predecir generando un error de lógica. Si se desea conocer el origen de las variables no inicializadas se puede activar la opción <code>--track-origins</code> tal y como se muestra en el siguiente comando.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --leak-check=yes --track-origins=yes ./example1.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Como se puede observar en la salida, en la parte asociada al <strong>Backtrace</strong> (resaltada a continuación) se muestra el origen del problema esta en la linea 3 del archivo <code>example1.c</code>, que es donde se hizo la declaración de la variable <code>p</code> sin inicializarla de modo que su valor es desconocido.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==134== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134== Command: ./example1.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==134== Conditional jump or move depends on uninitialised value(s)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==134==    at 0x109135: main (example1.c:5)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==134==  Uninitialised value was created by a stack allocation</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==134==    at 0x109129: main (example1.c:3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134== HEAP SUMMARY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134==     in use at exit: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134== All heap blocks were freed -- no leaks are possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==134== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==134== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-caso-de-uso-memcheck--illegal-readwrite">3.2. Caso de uso: Memcheck – Illegal read/write<a class="hash-link" aria-label="Direct link to 3.2. Caso de uso: Memcheck – Illegal read/write" title="Direct link to 3.2. Caso de uso: Memcheck – Illegal read/write" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#32-caso-de-uso-memcheck--illegal-readwrite">​</a></h3>
<p>Un error de acceso ilegal a memoria <strong><code>Illegal read/write error</code></strong> ocurre cuando se intenta leer o escribir en una dirección de memoria a la que no tiene acceso autorizado (dirección que no se encuentra en el rango de direcciones validas del programa). A continuación se detallan algunas situaciones que causan este tipo de error:</p>
<ol>
<li>
<p><strong>Acceso a Memoria Liberada</strong>: Leer o escribir en memoria después de haberla liberado.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ptr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ptr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Illegal write</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Acceso Fuera de los Límites de un Arreglo</strong>: Indices del arreglo fuera de rango.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Illegal write, índice fuera del rango</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Acceso a Punteros No Inicializados</strong>: Utilizar punteros que no han sido inicializados.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ptr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ptr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Illegal write</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Desbordamiento de Pila</strong>: Usar más memoria de pila de la que está disponible.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1000000</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Puede causar un desbordamiento de pila</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ejemplos-1">Ejemplos<a class="hash-link" aria-label="Direct link to Ejemplos" title="Direct link to Ejemplos" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#ejemplos-1">​</a></h4>
<ol>
<li>
<p>Haga un analisis de memoria para el siguiente código (example2.c) usando <code>valgrind</code>:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token operator" style="color:#393A34">*</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* invalid write error */</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* invalid read error */</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Para compilar el programa tenemos el siguiente comando:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -Wall example2.c -o example2.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando <code>valgrind</code> empleando la herramienta <code>Memcheck</code> se muestra a continuación:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --tool=memcheck --leak-check=yes ./example2.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La salida resultante se muestra a continuación:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==141== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141== Command: ./example2.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141== Invalid write of size 4</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==    at 0x10918B: main (example2.c:6)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==  Address 0x4a4a06c is 4 bytes after a block of size 40 alloc&#x27;d</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==    by 0x10917E: main (example2.c:5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141== Invalid read of size 4</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==    at 0x109195: main (example2.c:7)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==  Address 0x4a4a06c is 4 bytes after a block of size 40 alloc&#x27;d</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141==    by 0x10917E: main (example2.c:5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141== HEAP SUMMARY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==     in use at exit: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==   total heap usage: 1 allocs, 1 frees, 40 bytes allocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141== All heap blocks were freed -- no leaks are possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==141== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==141== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Como se muestra en la parte resaltada anteriormente, en el código anterior se esta intentando escribir en un area de memoria invalida (dirección <code>p+sizeof(int)*11</code>) pues solo se reservo memoria para 10 datos tipo <code>int</code>, no para 11.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-caso-de-uso-memcheck--invalid-free">3.3. Caso de uso: Memcheck – Invalid free<a class="hash-link" aria-label="Direct link to 3.3. Caso de uso: Memcheck – Invalid free" title="Direct link to 3.3. Caso de uso: Memcheck – Invalid free" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#33-caso-de-uso-memcheck--invalid-free">​</a></h3>
<p>Un error tipo <strong><code>Invalid free</code></strong> se da tipicamente en escenarios como los que se describen a continuación:</p>
<ol>
<li>
<p><strong>Doble liberación de memoria</strong>: Intentar liberar la misma porción de memoria más de una vez.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> ptr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Error: doble liberación</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Liberar memoria no asignada dinámicamente</strong>: Intentar liberar un puntero que no apunta a memoria dinamicamente asignada.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> ptr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ptr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Error: no se puede liberar memoria estática o automática</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ejemplos-2">Ejemplos<a class="hash-link" aria-label="Direct link to Ejemplos" title="Direct link to Ejemplos" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#ejemplos-2">​</a></h4>
<ol>
<li>
<p>Usando <code>valgrind</code> analice el código (example3.c) que se muestra a continuación:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token operator" style="color:#393A34">*</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    p</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Error: p has already been freed */</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando de compilación se muestra a continuación:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -Wall example3.c -o example3.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando <code>valgring</code> empleado es el siguiente:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --leak-check=yes ./example3.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Finalmente, los resultados del ejecutar el <code>valgrind</code> tienen la siguiente forma:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==148== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148== Command: ./example3.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148== Invalid free() / delete / delete[] / realloc()</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==    by 0x1091C6: main (example3.c:9)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==  Address 0x4a4a040 is 0 bytes inside a block of size 40 free&#x27;d</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==    by 0x1091BA: main (example3.c:8)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==  Block was alloc&#x27;d at</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148==    by 0x10917E: main (example3.c:5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148== HEAP SUMMARY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148==     in use at exit: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148==   total heap usage: 1 allocs, 2 frees, 40 bytes allocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148== All heap blocks were freed -- no leaks are possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==148== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==148== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Como se resalta en la salida anterior, al realizar un doble <code>free</code> se libero un espacio de memoria que ya no existia (debido a la primera llamada <code>free</code> realizada).</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-caso-de-uso-memcheck--invalid-system-call-parameter">3.4. Caso de uso: Memcheck – Invalid System Call Parameter<a class="hash-link" aria-label="Direct link to 3.4. Caso de uso: Memcheck – Invalid System Call Parameter" title="Direct link to 3.4. Caso de uso: Memcheck – Invalid System Call Parameter" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#34-caso-de-uso-memcheck--invalid-system-call-parameter">​</a></h3>
<p>En <code>Valgrind</code> el error <code>Invalid System Call Parameter</code> indica que el programa esta pasando argumentos incorrectos a una llamada se sistema.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ejemplos-3">Ejemplos<a class="hash-link" aria-label="Direct link to Ejemplos" title="Direct link to Ejemplos" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#ejemplos-3">​</a></h4>
<ol>
<li>
<p>Analice el siguiente códido (example4.c) con <code>valgrind</code>:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;unistd.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line theme-code-block-highlighted-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* Error: unaddressable bytes */</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token function" style="color:#d73a49">free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando empleado para compilar se muestra a continuación:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -Wall example4.c -o example4.out </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando <code>valgrind</code> empleado es el siguiente:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --leak-check=yes ./example4.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>De la salida resultante a continuación, se puede apreciar la llamada al sistema esta intentando leer desde la entrada estandar <code>100 bytes</code> y colocarlos en el buffer <code>p</code> cuyo tamaño es de <code>10 bytes</code> lo cual genera un error pues solo los primeros <code>10 bytes</code> son accesibles.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==155== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155== Command: ./example4.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==155== Syscall param read(buf) points to unaddressable byte(s)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==155==    at 0x4962FD2: read (read.c:26)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==155==    by 0x1091B8: main (example4.c:7)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==155==  Address 0x4a4a04a is 0 bytes after a block of size 10 alloc&#x27;d</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==155==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==155==    by 0x10919E: main (example4.c:6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155== HEAP SUMMARY:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155==     in use at exit: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155==   total heap usage: 1 allocs, 1 frees, 10 bytes allocated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155== All heap blocks were freed -- no leaks are possible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==155== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==155== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-caso-de-uso-memcheck--memory-leak-detection">3.4. Caso de uso: Memcheck – Memory Leak Detection<a class="hash-link" aria-label="Direct link to 3.4. Caso de uso: Memcheck – Memory Leak Detection" title="Direct link to 3.4. Caso de uso: Memcheck – Memory Leak Detection" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#34-caso-de-uso-memcheck--memory-leak-detection">​</a></h3>
<p>Recordemos que un <strong>memory leak</strong> (fuga de memoria) se da cuando un programa no libera la memoria (dinamicamente reservada) que ya no necesita. Existen varias clases de fugas, las principales son:</p>
<ul>
<li>
<p><strong>definitely lost</strong>: En este caso, los bloques de memoria asignados se pierden definitivamente debido a que el apuntador relacionado con estos se pierde (al apuntar a otra parte por ejemplo) de tal manera que no es posible acceder nuevamente a la dirección asociada a dichos bloques.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token operator" style="color:#393A34">*</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Se pierde el puntero</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>possibly lost</strong>: Este caso se da cuando el <code>valgrind</code> no tiene la certeza sobre la perdida de un bloque debido a que aun hay apuntadores que todavia lo referencian. Por ejemplo hacer cosas como mover un apuntador a la mitad del bloque referencia por este en el heap puede hacer que se de este problema.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">*</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">*</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>Cuando se esta realizando analisis de fugas de memoria, la recomendación es usar la opción <code>--leak-check=full</code> pues dara información del tipo de perdida que se tiene.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ejemplo">Ejemplo<a class="hash-link" aria-label="Direct link to Ejemplo" title="Direct link to Ejemplo" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#ejemplo">​</a></h4>
<ol>
<li>
<p>Considere el siguiente programa (example5.c):</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token operator" style="color:#393A34">*</span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Para compilar el programa tenemos:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -Wall example5.c -o example5.out </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando <code>valgrind</code> aplicado se muestra a continuación:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --leak-check=full ./example5.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Para este caso, la salida arrojada se muestra a continuación:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==144== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144== Command: ./example5.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144== HEAP SUMMARY:</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==     in use at exit: 20 bytes in 1 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==   total heap usage: 1 allocs, 0 frees, 20 bytes allocated</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144== 20 bytes in 1 blocks are definitely lost in loss record 1 of 1</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==    by 0x10915E: main (example5.c:5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144== LEAK SUMMARY:</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==    definitely lost: 20 bytes in 1 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==    indirectly lost: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==      possibly lost: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==    still reachable: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144==         suppressed: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==144== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==144== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>En el programa anterior, <code>p</code> contiene la dirección de un bloque de <code>20 bytes</code> pero este no es liberado en ninguna parte del programa. De manera que el puntero a este bloque de <code>20 bytes</code> se pierde por siempre.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-miselanea-de-ejemplos">4. Miselanea de ejemplos<a class="hash-link" aria-label="Direct link to 4. Miselanea de ejemplos" title="Direct link to 4. Miselanea de ejemplos" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#4-miselanea-de-ejemplos">​</a></h2>
<ol>
<li>
<p>Dado el siguiente programa (sample.c):</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* sample.c */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdio.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;stdlib.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">SIZE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sum </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">malloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SIZE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> SIZE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sum </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">26</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sum </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hi!\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando empleado para compilar se muestra a continuación:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -g -Wall sample.c -o sample.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El comando de <code>valgrind</code> se muestra a continuación:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">valgrind --tool=memcheck --leak-check=full ./sample.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La salida resultante tiene la siguiente forma:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">==152== Memcheck, a memory error detector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152== Copyright (C) 2002-2017, and GNU GPL&#x27;d, by Julian Seward et al.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152== Command: ./sample.out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152== error calling PR_SET_PTRACER, vgdb might block</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152== Invalid read of size 4</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    at 0x1091A7: main (sample.c:10)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==  Address 0x4a4a0a4 is 0 bytes after a block of size 100 alloc&#x27;d</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    by 0x109185: main (sample.c:8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152== Invalid write of size 4</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    at 0x1091BE: main (sample.c:11)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==  Address 0x4a4a0a8 is 4 bytes after a block of size 100 alloc&#x27;d</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    by 0x109185: main (sample.c:8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152== Conditional jump or move depends on uninitialised value(s)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    at 0x1091D0: main (sample.c:13)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hi!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152== HEAP SUMMARY:</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==     in use at exit: 100 bytes in 1 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==   total heap usage: 2 allocs, 1 frees, 612 bytes allocated</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152== 100 bytes in 1 blocks are definitely lost in loss record 1 of 1</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    by 0x109185: main (sample.c:8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152== LEAK SUMMARY:</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    definitely lost: 100 bytes in 1 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    indirectly lost: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==      possibly lost: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==    still reachable: 0 bytes in 0 blocks</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152==         suppressed: 0 bytes in 0 blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152== Use --track-origins=yes to see where uninitialised values come from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">==152== For lists of detected and suppressed errors, rerun with: -s</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#393A34"><span class="token plain">==152== ERROR SUMMARY: 78 errors from 4 contexts (suppressed: 0 from 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Preguntas</strong>:</p>
<ol>
<li>¿Cuantos errores son detectados?</li>
<li>¿Que tipo de errores se muestran?</li>
</ol>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-referencias">5. Referencias<a class="hash-link" aria-label="Direct link to 5. Referencias" title="Direct link to 5. Referencias" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#5-referencias">​</a></h2>
<ul>
<li><a href="https://github.com/sisoputnfrba/so-commons-library" target="_blank" rel="noopener noreferrer">https://github.com/sisoputnfrba/so-commons-library</a></li>
<li><a href="https://github.com/sisoputnfrba" target="_blank" rel="noopener noreferrer">https://github.com/sisoputnfrba</a></li>
<li><a href="https://github.com/sisoputnfrba/so-commons-library" target="_blank" rel="noopener noreferrer">https://github.com/sisoputnfrba/so-commons-library</a></li>
<li><a href="https://github.com/dannymrock/UdeA-SO-Lab/tree/master/lab2/herramientas/valgrind" target="_blank" rel="noopener noreferrer">https://github.com/dannymrock/UdeA-SO-Lab/tree/master/lab2/herramientas/valgrind</a></li>
<li><a href="https://docs.utnso.com.ar/guias/herramientas/valgrind" target="_blank" rel="noopener noreferrer">https://docs.utnso.com.ar/guias/herramientas/valgrind</a></li>
<li><a href="https://www.u-cursos.cl/ingenieria/2007/2/CC31A/1/material_docente/bajar?id_material=140211" target="_blank" rel="noopener noreferrer">https://www.u-cursos.cl/ingenieria/2007/2/CC31A/1/material_docente/bajar?id_material=140211</a></li>
<li><a href="https://docs.utnso.com.ar/guias/herramientas/valgrind" target="_blank" rel="noopener noreferrer">https://docs.utnso.com.ar/guias/herramientas/valgrind</a></li>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/Educators-Slides/Youjip/Part1.Virtualization/pdf/14.Memory_API.pdf" target="_blank" rel="noopener noreferrer">https://pages.cs.wisc.edu/~remzi/OSTEP/Educators-Slides/Youjip/Part1.Virtualization/pdf/14.Memory_API.pdf</a></li>
<li><a href="https://docs.utnso.com.ar/primeros-pasos/primer-proyecto-c" target="_blank" rel="noopener noreferrer">https://docs.utnso.com.ar/primeros-pasos/primer-proyecto-c</a></li>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/Homework/homework.html" target="_blank" rel="noopener noreferrer">https://pages.cs.wisc.edu/~remzi/OSTEP/Homework/homework.html</a></li>
<li><a href="https://pages.cs.wisc.edu/~remzi/Classes/537/Spring2018/" target="_blank" rel="noopener noreferrer">https://pages.cs.wisc.edu/~remzi/Classes/537/Spring2018/</a></li>
<li><a href="https://github.com/ossu/computer-science/blob/master/coursepages/ostep/README.md" target="_blank" rel="noopener noreferrer">https://github.com/ossu/computer-science/blob/master/coursepages/ostep/README.md</a></li>
<li><a href="https://ocw.unican.es/course/view.php?id=236#section-3" target="_blank" rel="noopener noreferrer">https://ocw.unican.es/course/view.php?id=236#section-3</a></li>
<li><a href="https://github.com/xxyzz/ostep-hw/tree/master/projects" target="_blank" rel="noopener noreferrer">https://github.com/xxyzz/ostep-hw/tree/master/projects</a></li>
<li><a href="https://cse.buffalo.edu/~eblanton/course/cse220/" target="_blank" rel="noopener noreferrer">https://cse.buffalo.edu/~eblanton/course/cse220/</a></li>
<li><a href="https://courses.grainger.illinois.edu/cs423/sp2021/schedule/" target="_blank" rel="noopener noreferrer">https://courses.grainger.illinois.edu/cs423/sp2021/schedule/</a></li>
<li><a href="https://www.cs.virginia.edu/~cr4bd/4414/S2020/" target="_blank" rel="noopener noreferrer">https://www.cs.virginia.edu/~cr4bd/4414/S2020/</a></li>
<li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/Educators-Slides/" target="_blank" rel="noopener noreferrer">https://pages.cs.wisc.edu/~remzi/OSTEP/Educators-Slides/</a></li>
<li><a href="https://ceunican.github.io/aos/" target="_blank" rel="noopener noreferrer">https://ceunican.github.io/aos/</a></li>
<li><a href="https://github.com/tigarto/memory-api" target="_blank" rel="noopener noreferrer">https://github.com/tigarto/memory-api</a></li>
<li><a href="https://valgrind.org/docs/manual/manual.html" target="_blank" rel="noopener noreferrer">https://valgrind.org/docs/manual/manual.html</a></li>
<li><a href="https://valgrind.org/docs/manual/valgrind_manual.pdf" target="_blank" rel="noopener noreferrer">https://valgrind.org/docs/manual/valgrind_manual.pdf</a></li>
<li><a href="https://web.stanford.edu/class/archive/cs/cs107/cs107.1246/resources/valgrind.html" target="_blank" rel="noopener noreferrer">https://web.stanford.edu/class/archive/cs/cs107/cs107.1246/resources/valgrind.html</a></li>
<li><a href="https://web.stanford.edu/class/archive/cs/cs107/cs107.1174/guide_valgrind.html" target="_blank" rel="noopener noreferrer">https://web.stanford.edu/class/archive/cs/cs107/cs107.1174/guide_valgrind.html</a></li>
<li><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6/html/performance_tuning_guide/s-memory-valgrind" target="_blank" rel="noopener noreferrer">https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6/html/performance_tuning_guide/s-memory-valgrind</a></li>
<li><a href="https://docs.redhat.com/es/documentation/red_hat_developer_toolset/11/html/user_guide/chap-valgrind" target="_blank" rel="noopener noreferrer">https://docs.redhat.com/es/documentation/red_hat_developer_toolset/11/html/user_guide/chap-valgrind</a></li>
<li><a href="https://man7.org/linux/man-pages/man1/valgrind.1.html" target="_blank" rel="noopener noreferrer">https://man7.org/linux/man-pages/man1/valgrind.1.html</a></li>
<li><a href="https://docs.nersc.gov/tools/debug/valgrind/" target="_blank" rel="noopener noreferrer">https://docs.nersc.gov/tools/debug/valgrind/</a></li>
<li><a href="https://wiki.tiker.net/ToolCheatSheet/" target="_blank" rel="noopener noreferrer">https://wiki.tiker.net/ToolCheatSheet/</a></li>
<li><a href="https://hps.vi4io.org/teaching/summer_term_2022/pchpc" target="_blank" rel="noopener noreferrer">https://hps.vi4io.org/teaching/summer_term_2022/pchpc</a></li>
<li><a href="https://engineering.purdue.edu/ece264/" target="_blank" rel="noopener noreferrer">https://engineering.purdue.edu/ece264/</a></li>
<li><a href="https://engineering.purdue.edu/ece264/24su/schedule" target="_blank" rel="noopener noreferrer">https://engineering.purdue.edu/ece264/24su/schedule</a></li>
<li><a href="https://www.cs.dartmouth.edu/~cs50/Lectures/debug/" target="_blank" rel="noopener noreferrer">https://www.cs.dartmouth.edu/~cs50/Lectures/debug/</a></li>
<li><a href="https://www.usenix.org/legacy/publications/library/proceedings/usenix05/tech/general/full_papers/seward/seward_html/usenix2005.html" target="_blank" rel="noopener noreferrer">https://www.usenix.org/legacy/publications/library/proceedings/usenix05/tech/general/full_papers/seward/seward_html/usenix2005.html</a></li>
<li><a href="https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/6/html/performance_tuning_guide/s-memory-valgrind#s-memory-valgrind" target="_blank" rel="noopener noreferrer">https://docs.redhat.com/es/documentation/red_hat_enterprise_linux/6/html/performance_tuning_guide/s-memory-valgrind#s-memory-valgrind</a></li>
<li><a href="https://ranger.uta.edu/~alex/courses/3318/" target="_blank" rel="noopener noreferrer">https://ranger.uta.edu/~alex/courses/3318/</a></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/udea-so/docs/laboratorio/tutoriales/herramientas/gdb"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GDB</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/udea-so/docs/laboratorio/tutoriales/procesos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Procesos</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#1-antes-de-empezar">1. Antes de empezar</a><ul><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#11-antes-de-empezar">1.1. Antes de empezar</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#12-mapa-de-memoria">1.2. Mapa de memoria</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#13-manejo-de-memoria">1.3. Manejo de memoria</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#2-sobre-el-valgrind">2. Sobre el valgrind</a><ul><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#21-promeros-pasos">2.1. Promeros pasos</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#213-analizar-los-resultados">2.1.3. Analizar los resultados</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#22-ejemplo-sencillo">2.2. Ejemplo sencillo</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#3-analisis-de-memoria-usando-valgrind">3. Analisis de memoria usando <code>valgrind</code></a><ul><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#31-caso-de-uso-memcheck--uninitialized-memory">3.1. Caso de uso: Memcheck – Uninitialized Memory</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#32-caso-de-uso-memcheck--illegal-readwrite">3.2. Caso de uso: Memcheck – Illegal read/write</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#33-caso-de-uso-memcheck--invalid-free">3.3. Caso de uso: Memcheck – Invalid free</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#34-caso-de-uso-memcheck--invalid-system-call-parameter">3.4. Caso de uso: Memcheck – Invalid System Call Parameter</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#34-caso-de-uso-memcheck--memory-leak-detection">3.4. Caso de uso: Memcheck – Memory Leak Detection</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#4-miselanea-de-ejemplos">4. Miselanea de ejemplos</a></li><li><a class="table-of-contents__link toc-highlight" href="/udea-so/docs/laboratorio/tutoriales/herramientas/valgrind#5-referencias">5. Referencias</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Universidad de Antioquia. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>